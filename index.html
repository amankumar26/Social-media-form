<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Social Media Seva Form</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&family=Noto+Sans+Devanagari:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg-color: #f0f4f8;
      --form-bg: rgba(255, 255, 255, 0.15);
      --text-color: #000;
      --input-bg: #fff;
      --btn-bg: linear-gradient(to right, #667eea, #764ba2);
      --btn-hover: linear-gradient(to right, #5a67d8, #6b46c1);
    }

    [data-theme="dark"] {
      --bg-color: #121212;
      --form-bg: rgba(30, 30, 30, 0.35);
      --text-color: #fff;
      --input-bg: #1e1e1e;
      --btn-bg: linear-gradient(to right, #4e54c8, #8f94fb);
      --btn-hover: linear-gradient(to right, #3e43b2, #7f84eb);
    }

    body {
      font-family: 'Poppins', 'Noto Sans Devanagari', sans-serif;
      background: var(--bg-color);
      color: var(--text-color);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: start;
      padding: 40px 20px;
    }

    .glass-form {
      background: var(--form-bg);
      backdrop-filter: blur(20px);
      border-radius: 20px;
      padding: 40px 30px;
      max-width: 750px;
      width: 100%;
      box-shadow: 0 15px 40px rgba(0, 0, 0, 0.25);
      position: relative;
      animation: fadeInUp 1s ease-out;
    }

    @keyframes fadeInUp {
      from { transform: translateY(30px); opacity: 0; }
      to { transform: translateY(0); opacity: 1; }
    }

    .form-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .form-header img {
      max-width: 100px;
      margin-bottom: 15px;
    }

    .form-header h3 {
      font-weight: 700;
      font-size: 1.8rem;
    }

    .lang-toggle {
      text-align: right;
      margin-bottom: 20px;
    }

    .btn-lang {
      background-color: #ffffffcc;
      border: none;
      padding: 6px 14px;
      border-radius: 8px;
      cursor: pointer;
      font-weight: 600;
    }

    label {
      font-weight: 600;
      font-size: 0.95rem;
      margin-bottom: 4px;
      display: block;
    }

    input.form-control {
      border-radius: 12px;
      border: none;
      font-size: 1.05rem;
      padding: 12px 15px;
      background: var(--input-bg);
      color: var(--text-color);
    }

    #inactive-overlay {
      display: none;
      position: absolute;
      inset: 0;
      background: rgba(255, 255, 255, 0.85);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      z-index: 10;
      font-weight: bold;
      font-size: 1.3rem;
      justify-content: center;
      align-items: center;
      text-align: center;
      color: #222;
    }

    #form-message {
      text-align: center;
      margin-bottom: 10px;
      font-weight: 600;
    }
  </style>
</head>
<body>
<div class="glass-form" id="form-container">
  <div id="inactive-overlay">тЪая╕П рд╕рдд рд╕рд╛рд╣реЗрдм рдЬреА, рд░рд┐рдкреЛрд░реНрдЯ рдлреЙрд░реНрдореЗрдЯ рдЕрднреА рдмрдВрдж рд╣реИред</div>

  <div class="lang-toggle d-flex justify-content-end gap-2">
    <button id="langBtn" class="btn-lang">ЁЯМР Hindi</button>
    <button id="themeToggle" class="btn-lang">ЁЯМУ Dark Mode</button>
    <button type="button" id="previewBtn" class="btn-lang">ЁЯСБя╕П Preview</button>
  </div>

  <div class="form-header">
    <img src="https://img.icons8.com/fluency/96/clipboard.png" alt="Form Icon">
    <h3 id="form-title">Social Media Seva Form</h3>
  </div>

  <div id="form-message"></div>

  <form id="activity-form">
    <div class="row g-4" id="form-fields"></div>
    <div class="mt-4 text-center">
      <button type="submit" class="btn btn-primary px-4" id="submitBtn">Submit</button>
    </div>
  </form>
</div>

<script>
const translations = {
  en: {
    title: "Social Media Seva Form",
    name: "Enter Your Name/Address",
    phone: "WhatsApp Number",
    facebook: "Facebook Post",
    twitter: "X(Twitter)Post",
    thread: "Thread Post",
    instagram: "Instagram Post",
    pinterest: "Pinterest Pins",
    satsang: "Satsang Share",
    ashram: "Ashram Id Seva",
    state: "State Id Seva",
    seva: "11 am Seva",
    youtube: "YouTube Video Watch",
    submit: "Submit",
    closed: "ЁЯФЙ Sat Saheb Ji, Seva reporting is currently closed."
  },
  hi: {
    title: "рд╕реЛрд╢рд▓ рдореАрдбрд┐рдпрд╛ рд╕реЗрд╡рд╛ рдлреЙрд░реНрдо",
    name: "рдЕрдкрдирд╛ рдирд╛рдо/рдПрдбреНрд░реЗрд╕ рджрд░реНрдЬ рдХрд░реЗрдВ",
    phone: "рд╡реНрд╣рд╛рдЯреНрд╕рдПрдк рдирдВрдмрд░",
    facebook: "рдлреЗрд╕рдмреБрдХ рдкреЛрд╕реНрдЯ",
    twitter: "X (рдЯреНрд╡рд┐рдЯрд░)рдкреЛрд╕реНрдЯ",
    thread: "рдереНрд░реЗрдб рдкреЛрд╕реНрдЯ",
    instagram: "рдЗрдВрд╕реНрдЯрд╛рдЧреНрд░рд╛рдо рдкреЛрд╕реНрдЯ",
    pinterest: "рдкрд┐рдВрдЯрд░реЗрд╕реНрдЯ рдкрд┐рди",
    satsang: "рд╕рддреНрд╕рдВрдЧ рд╢реЗрдпрд░",
    ashram: "рдЖрд╢реНрд░рдо ID рд╕реЗрд╡рд╛",
    state: "рд░рд╛рдЬреНрдп ID рд╕реЗрд╡рд╛",
    seva: "11 рдмрдЬреЗ рдХреА рд╕реЗрд╡рд╛",
    youtube: "рдпреВрдЯреНрдпреВрдм рд╡реАрдбрд┐рдпреЛ рджреЗрдЦреЗрдВ",
    submit: "рдЬрдорд╛ рдХрд░реЗрдВ",
    closed: "ЁЯФЙ рд╕рдд рд╕рд╛рд╣реЗрдм рдЬреА, рд╕реЗрд╡рд╛ рдХреА рд╣рд╛рдЬрд░реА рдЕрднреА рдмрдВрдж рд╣реИред"
  }
};

const placeholders = {
  en: {
    name: "Eg: Aman Das/Jasola",
    phone: "Eg: 9876543210",
    facebook: "Number of posts today",
    twitter: "Number of tweets",
    thread: "Thread post count",
    instagram: "Instagram posts count",
    pinterest: "Pins count",
    satsang: "Total Satsang Share",
    ashram: "Total Likes of Day",
    state: "Total Likes of Day",
    seva: "Eg: 3 keyword",
    youtube: "Total Videos watched"
  },
  hi: {
    name: "рдЙрджрд╛рд╣рд░рдг: рдЕрдорди рджрд╛рд╕/рдЬрд╕реЛрд▓рд╛",
    phone: "рдЙрджрд╛рд╣рд░рдг: 9876543210",
    facebook: "рдлреЗрд╕рдмреБрдХ рдкрд░ рдХрд┐рддрдиреЗ рдкреЛрд╕реНрдЯ рдХрд┐рдП?",
    twitter: "X рдкрд░ рдХрд┐рддрдиреЗ рдкреЛрд╕реНрдЯ рдХрд┐рдП?",
    thread: "рдереНрд░реЗрдб рдкрд░ рдХрд┐рддрдиреЗ рдкреЛрд╕реНрдЯ рдХрд┐рдП?",
    instagram: "рдЗрдВрд╕реНрдЯрд╛рдЧреНрд░рд╛рдо рдкрд░ рдХрд┐рддрдиреЗ рдкреЛрд╕реНрдЯ рдХрд┐рдП?",
    pinterest: "рдкрд┐рдВрдЯреНрд░реАрд╕реЗрдЯ рдкрд░ рдХрд┐рддрдиреЗ рдкреЛрд╕реНрдЯ рдХрд┐рдП?",
    satsang: "рд╢реЗрдпрд░ рдХреА рд╕рдВрдЦреНрдпрд╛",
    ashram: "рдкреВрд░реЗ рджрд┐рди рдореЗрдВ рдХрд┐рддрдиреЗ Likes рдХрд┐рдП?",
    state: "рдкреВрд░реЗ рджрд┐рди рдореЗрдВ рдХрд┐рддрдиреЗ Likes рдХрд┐рдП?",
    seva: "рдХрд┐рддрдиреЗ рдХреАрд╡рд░реНрдбреНрд╕ рд╕рд░реНрдЪ рдХрд┐рдП?",
    youtube: "рджреЗрдЦреЗ рдЧрдП рд╡реАрдбрд┐рдпреЛ рдХреА рд╕рдВрдЦреНрдпрд╛ ред"
  }
};

let currentLang = "en";
const fields = ["name", "phone", "facebook", "twitter", "thread", "instagram", "pinterest", "satsang", "ashram", "state", "seva", "youtube"];

function renderForm(lang = "en") {
  const formFields = document.getElementById("form-fields");
  const t = translations[lang];
  const p = placeholders[lang];

  document.getElementById("form-title").textContent = t.title;
  document.getElementById("submitBtn").textContent = t.submit;

  formFields.innerHTML = `
    <div class="col-md-6">
      <label for="name">${t.name}</label>
      <input type="text" class="form-control" id="name" placeholder="${p.name}" required>
    </div>
    <div class="col-md-6">
      <label for="phone">${t.phone}</label>
      <input type="tel" class="form-control" id="phone" placeholder="${p.phone}" required>
    </div>
  `;

  fields.slice(2).forEach(field => {
    formFields.innerHTML += `
      <div class="col-md-6">
        <label for="${field}">${t[field]}</label>
        <input type="number" class="form-control" id="${field}" placeholder="${p[field]}">
      </div>
    `;
  });

  const savedPhone = localStorage.getItem("userPhone");
  if (savedPhone) {
    document.getElementById("phone").value = savedPhone;
    document.getElementById("phone").readOnly = true;
  }
}

document.getElementById("langBtn").addEventListener("click", () => {
  currentLang = currentLang === "en" ? "hi" : "en";
  document.getElementById("langBtn").textContent = currentLang === "en" ? "ЁЯМР Hindi" : "ЁЯМР English";
  renderForm(currentLang);
});

const themeToggle = document.getElementById("themeToggle");
function applyTheme(theme) {
  document.documentElement.setAttribute("data-theme", theme);
  localStorage.setItem("theme", theme);
  themeToggle.textContent = theme === "dark" ? "тШАя╕П Light Mode" : "ЁЯМУ Dark Mode";
}
themeToggle.addEventListener("click", () => {
  const current = document.documentElement.getAttribute("data-theme") || "light";
  const next = current === "light" ? "dark" : "light";
  applyTheme(next);
});
applyTheme(localStorage.getItem("theme") || "light");

const scriptURL = 'https://script.google.com/macros/s/AKfycbx3xPUprl6OrGX1j283GljCHKmmBEKTnEEODlH-Eyp2LfGcStW-FR8P8r_sl4SfxqoCcQ/exec';
const form = document.getElementById("activity-form");
const overlay = document.getElementById("inactive-overlay");
const messageDiv = document.getElementById("form-message");
let formClosed = false;

renderForm(currentLang);

fetch(scriptURL)
  .then(res => res.json())
  .then(data => {
    if (data.status !== "active") {
      formClosed = true;
      overlay.style.display = "flex";
      messageDiv.textContent = translations[currentLang].closed;
      form.querySelectorAll("input").forEach(input => input.readOnly = true);
      document.getElementById("submitBtn").disabled = true;
    }
  })
  .catch(() => {
    messageDiv.textContent = translations[currentLang].closed;
  });

form.addEventListener("submit", function (e) {
  e.preventDefault();
  if (formClosed) return alert(translations[currentLang].closed);

  const phoneInput = document.getElementById("phone");
  const enteredPhone = phoneInput.value.trim();
  const savedPhone = localStorage.getItem("userPhone");

  if (savedPhone && savedPhone !== enteredPhone) {
    alert("тЪая╕П рдЖрдк рд╕рд┐рд░реНрдл рдЕрдкрдиреЗ рдирдВрдмрд░ рд╕реЗ рд░рд┐рдкреЛрд░реНрдЯ рджреЗ рд╕рдХрддреЗ рд╣реИрдВред");
    return;
  }

  if (!savedPhone) {
    localStorage.setItem("userPhone", enteredPhone);
  }

  const data = {};
  fields.forEach(f => {
    const el = document.getElementById(f);
    data[f] = el ? el.value : "";
  });

  localStorage.setItem("lastSubmission", JSON.stringify(data));

  document.getElementById("submitBtn").disabled = true;
  document.getElementById("submitBtn").textContent = currentLang === "en" ? "Submitting..." : "рдЬрдорд╛ рд╣реЛ рд░рд╣рд╛ рд╣реИ...";

  fetch(scriptURL, {
    method: "POST",
    body: JSON.stringify(data)
  })
    .then(res => res.text())
    .then(text => {
      alert(text);
      form.reset();
      phoneInput.value = enteredPhone;
      phoneInput.readOnly = true;
      document.getElementById("submitBtn").disabled = false;
      document.getElementById("submitBtn").textContent = translations[currentLang].submit;
    })
    .catch(err => {
      alert("Error: " + err);
      document.getElementById("submitBtn").disabled = false;
      document.getElementById("submitBtn").textContent = translations[currentLang].submit;
    });
});

document.getElementById("previewBtn").addEventListener("click", () => {
  const last = JSON.parse(localStorage.getItem("lastSubmission"));
  if (!last) return alert("No previous report found.");

  const today = new Date();
  const dateStr = `${today.getDate()}-${today.getMonth() + 1}-${today.getFullYear()}`;

  const previewText = `
//рд▓рд╛рд╕реНрдЯ рд╕реЗрд╡рд╛ рд░рд┐рдкреЛрд░реНрдЯ рдЬреЛ рдЕрдкрдиреЗ рднреЗрдЬреА рдереАредредредредред

тЧжтАвтЧПтЧЙтЬ┐ *рд╕рддрдЧреБрд░реБрджреЗрд╡ рдЬреА рдХреА рдЬрдп* тЬ┐тЧЙтЧПтАвтЧж

*DAILY SEVA REPORT*
-------------------------------------

*VIDHANSABHA - Badarpur*

*ЁЭРНЁЭРАЁЭРМЁЭРД - ${last.name || "N/A"}*

*DATE - ${dateStr}*

ЁЯФ╣ *FACEBOOK POST :- ${last.facebook || "0"}*
ЁЯФ╣ *TWITTER(X) POST :- ${last.twitter || "0"}*
ЁЯФ╣ *THREAD POST :- ${last.thread || "0"}*
ЁЯФ╣ *INSTAGRAM POST :- ${last.instagram || "0"}*
ЁЯФ╣ *PINTEREST POST :- ${last.pinterest || "0"}*
ЁЯФ╣ *SATSANG SHARE SEVA :- ${last.satsang || "0"}*
ЁЯФ╣ *ASHRAM ЁЯЖФ LIKE / SHARE :- ${last.ashram || "0"}*
ЁЯФ╣ *STATE ЁЯЖФ LIKE / SHARE :- ${last.state || "0"}*
ЁЯФ╣ *11 AM KEYWORD SEVA :- ${last.seva || "0"}*
ЁЯФ╣ *YOUTUBE VIDEO SEVA :- ${last.youtube || "0"}*

*ЁЯд▓ЁЯП╗ рд╕реЗрд╡рд╛ рдХреА рджрдпрд╛ рдмрдирд╛рдП рд░рдЦрдирд╛ рджрд╛рддрд╛ ЁЯд▓ЁЯП╗*
  `;
  alert(previewText);
});
</script>
</body>
</html>
